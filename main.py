"""
Main entry point for the AI-powered multi-agent content generation system.

ğŸ¤– LangChain Framework + Groq LLM Integration
âš¡ Real AI generation - NOT rule-based templates
ğŸ“¦ Batch-optimized: 3 API calls instead of 22

This system uses:
- LangChain for agent orchestration
- Groq API (llama-3.1-8b-instant) for LLM inference
- JsonOutputParser for structured AI responses
- ChatPromptTemplate for LLM prompt engineering

All questions, answers, and comparisons are generated by the LLM.
Zero hardcoded templates or if-else logic.
"""

from src.agents.orchestrator_langchain import LangChainOrchestrator
from src.agents.base_agent import AgentInput


def main():
    """
    Main execution function.
    
    Workflow:
    1. Initialize ChatGroq LLM via LangChain
    2. AI-generate 20+ questions using LLM prompts
    3. AI-generate batch answers (1 API call)
    4. AI-generate fictional competitor
    5. AI-generate 7-point comparison
    6. Output 3 JSON files with AI-generated content
    """
    
    print("="*60)
    print("LangChain Multi-Agent Content Generation System")
    print("Powered by Groq LLM (AI-Generated, Not Rule-Based)")
    print("="*60)
    
    # Raw product data (as specified in assignment)
    raw_product_data = {
        "product_name": "GlowBoost Vitamin C Serum",
        "concentration": "10% Vitamin C",
        "skin_type": "Oily, Combination",
        "key_ingredients": "Vitamin C, Hyaluronic Acid",
        "benefits": "Brightening, Fades dark spots",
        "how_to_use": "Apply 2â€“3 drops in the morning before sunscreen",
        "side_effects": "Mild tingling for sensitive skin",
        "price": "â‚¹699"
    }
    
    try:
        # Create LangChain orchestrator with Groq LLM
        orchestrator = LangChainOrchestrator(output_dir="output")
        
        # Execute workflow
        input_data = AgentInput(data=raw_product_data)
        result = orchestrator(input_data)
        
        # Print final summary
        if result.success:
            print("\n" + "="*60)
            print("âœ… SUCCESS!")
            print("="*60)
            print(f"\nğŸ“¦ Product: {result.data['product_name']}")
            print(f"â“ Questions Generated: {result.data['questions_generated']} (AI-powered)")
            print(f"ğŸ’¡ Answers Generated: {result.data['answers_generated']} (AI-powered)")
            print(f"ğŸ”„ Competitor: {result.data['competitor_generated']} (AI-generated)")
            print(f"ğŸ“Š Comparison Points: {result.data['comparison_points']}")
            print(f"\nğŸ“„ Pages Created:")
            for page in result.data['pages_generated']:
                print(f"   - {page}.json")
            print(f"\nğŸ¤– Orchestration Framework: {result.data['orchestration_framework']}")
            print(f"ğŸ§  Model: {result.data['llm_model']}")
            print(f"âš¡ Generation: {result.data['generation_method']}")
            print(f"ğŸ”„ Workflow Pattern: {result.data['workflow_pattern']}")
            print(f"ğŸ“Š Total LLM API Calls: {result.data['llm_calls']['total']}")
            print(f"\nğŸ“ Output Directory: {result.data['output_directory']}/")
            print("\n" + "="*60)
        else:
            print("\nâŒ FAILED!")
            print(f"Errors: {', '.join(result.errors)}")
            
    except ValueError as e:
        print("\nâŒ Configuration Error!")
        print(f"{str(e)}")
        print("\nPlease ensure:")
        print("1. You have created .env file in the project root")
        print("2. Added your Groq API key: GROQ_API_KEY=your_key_here")
        print("3. Run: pip install -r requirements.txt")
    except Exception as e:
        print("\nâŒ Unexpected Error!")
        print(f"Error: {str(e)}")


if __name__ == "__main__":
    main()
